<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>AutoShield Dashboard</title>
    <style>
      body { font-family: Arial, sans-serif; margin: 20px; }
      table { border-collapse: collapse; width: 100%; }
      th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
      th { background-color: #f2f2f2; }
    </style>
  </head>
  <body>
    <h1>AutoShield Dashboard</h1>
    <p>Last updated: {{ now }}</p>
    
    <h2>Recent Login Attempts</h2>
    <table>
      <tr>
        <th>IP Address</th>
        <th>Timestamp</th>
        <th>Details</th>
      </tr>
      {% for attempt in attempts %}
      <tr>
        <td>{{ attempt['ip'] }}</td>
        <td>{{ attempt['timestamp'] }}</td>
        <td>{{ attempt['details'] }}</td>
      </tr>
      {% endfor %}
    </table>

    <h2>Recent Blocked IPs</h2>
    <table>
      <tr>
        <th>IP Address</th>
        <th>Block Timestamp</th>
        <th>Expiry Timestamp</th>
        <th>Block Count</th>
      </tr>
      {% for block in blocks %}
      <tr>
        <td>{{ block['ip'] }}</td>
        <td>{{ block['block_timestamp'] }}</td>
        <td>{{ block['expiry_timestamp'] }}</td>
        <td>{{ block['block_count'] }}</td>
      </tr>
      {% endfor %}
    </table>
  </body>
</html>
